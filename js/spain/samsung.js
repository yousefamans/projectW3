var amazon = [
  { "name": "Samsung S20 8GB 128GB"                  ,  "normalPrice" :  909   , "color" :  "lightblue"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "https://images-na.ssl-images-amazon.com/images/I/61%2BugFzrD2L._AC_SL1500_.jpg   "                         },
  { "name": "Samsung S20 8GB 128GB"                  ,  "normalPrice" :  909   , "color" :  "grey"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "https://images-na.ssl-images-amazon.com/images/I/61W7GElaqaL._AC_SL1500_.jpg   "                         },
  { "name": "Samsung S20+ 8GB 128GB"                 ,  "normalPrice" : 1009   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "https://images-na.ssl-images-amazon.com/images/I/613WJyrUuvL._AC_SL1500_.jpg   "                         },
  { "name": "Samsung S20 Ultra 5G 12GB 128GB"        ,  "normalPrice" : 1359   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "https://images-na.ssl-images-amazon.com/images/I/71Y4qk1TuHL._AC_SL1500_.jpg   "                         },
  { "name": "Samsung S20 Ultra 12GB 128GB"           ,  "normalPrice" : 1359   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "https://images-na.ssl-images-amazon.com/images/I/71Y4qk1TuHL._AC_SL1500_.jpg   "                         },
  { "name": "Samsung S20 Ultra 5G 12GB 128GB"        ,  "normalPrice" : 1359   , "color" :  "grey"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "https://images-na.ssl-images-amazon.com/images/I/71yOlMF9fqL._AC_SL1500_.jpg   "                         }, 
  { "name": "Samsung S10e 128GB "                    ,  "normalPrice" :  1     , "color" :  ""        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "   "                         },
  { "name": "Samsung S10 128 GB "                    ,  "normalPrice" : 599    , "color" :  "lightgreen"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "https://images-na.ssl-images-amazon.com/images/I/71T72z3btSL._AC_SX450_.jpg   "                         },
  { "name": "Samsung S10+ 128 GB "                   ,  "normalPrice" : 661   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "https://images-na.ssl-images-amazon.com/images/I/51Ef7QgiLeL._AC_SL1200_.jpg   "                         },
  { "name": "Samsung S10+ 128 GB "                   ,  "normalPrice" : 699   , "color" :  "white"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "https://images-na.ssl-images-amazon.com/images/I/51Ef7QgiLeL._AC_SL1200_.jpg   "                         },
  { "name": "Samsung S9 64 GB 4 GB "           ,  "normalPrice" :  0   , "color" :  "gold"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "   "                         },
  { "name": "Samsung S9 Plus 64 GB 6 GB "           ,  "normalPrice" :  0   , "color" :  "lightblue"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "   "                         }, 
  { "name": "Samsung S10 Lite 8GB 128GB "           ,  "normalPrice" :  0   , "color" :  "white"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "   "                         }, 
  { "name": "Samsung S10 Lite 8GB 128GB   "           ,  "normalPrice" :  0   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "   "                         }, 
  { "name": "Samsung S10 Lite 8GB 128GB "           ,  "normalPrice" :  0   , "color" :  ""        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "   "                         }, 
  { "name": "Samsung Note 10 Lite "                ,  "normalPrice" :  0   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "a" ,    "linkUrl" :  ""     , "img": "   "                         }, 
  








];







var mediamarkt = [
  { "name": "Samsung Note 10+ 256 GB 12 GB - REACONDICIONADO "   ,  "normalPrice" :  799   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_76161907/fee_786_587_png/REACONDICIONADO-M%C3%B3vil---Samsung-Galaxy-Note-10--6.3%22--8GB--256-GB--Android-9.0--Triple-camera--Aura-Glow   "                         },
  { "name": "Samsung  Note 10 256 GB 8 GB "                      ,  "normalPrice" :  759   , "color" :  "grey"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "   "                         },
  { "name": "Samsung Note 10 + 256 GB 12 GB "                    ,  "normalPrice" :  959   , "color" :  "grey"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_76161907/fee_786_587_png/REACONDICIONADO-M%C3%B3vil---Samsung-Galaxy-Note-10--6.3%22--8GB--256-GB--Android-9.0--Triple-camera--Aura-Glow   "                         },
  { "name": "Samsung Note 10 + 256 GB 12 GB "                    ,  "normalPrice" :  859   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_76161907/fee_786_587_png/REACONDICIONADO-M%C3%B3vil---Samsung-Galaxy-Note-10--6.3%22--8GB--256-GB--Android-9.0--Triple-camera--Aura-Glow   "                         },
  { "name": "Samsung Note 10 8GB 256 GB - REACONDICIONADO "      ,  "normalPrice" :  743   , "color" :  "glow"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_76161907/fee_786_587_png/REACONDICIONADO-M%C3%B3vil---Samsung-Galaxy-Note-10--6.3%22--8GB--256-GB--Android-9.0--Triple-camera--Aura-Glow   "                         },
  { "name": "Samsung Note 10 12GB 256 GB - REACONDICIONADO "     ,  "normalPrice" :  682   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "   "                         },
  { "name": "Samsung Note 10 Lite 128 GB 6GB "                   ,  "normalPrice" :  549   , "color" :  "glow"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_71946018/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-Note-10-Lite--Aura-Glow--128-GB--6GB-RAM--6.7%22-Full-HD---Exynos-9810--4500-mAh--Android   "                         },
  { "name": "Samsung S20 128 GB 8 GB "                           ,  "normalPrice" :  899   , "color" :  "grey"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_75479838/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-S20-4G--Gris--128-GB--8-GB-RAM--6.2%22-AMOLED-120-Hz--Exynos-990--4000-mAh--Android   "                         },
  { "name": "Samsung S20 128 GB 8 GB "                           ,  "normalPrice" :  899   , "color" :  "lightblue"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_75479845/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-S20-4G--Azul--128-GB--8-GB-RAM--6.2%22-AMOLED-120-Hz--Exynos-990--4000-mAh--Android   "                         },
  { "name": "Samsung S20 5G 128 GB 12 GB "                       ,  "normalPrice" :  999   , "color" :  "grey"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_75479775/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-S20-5G--Gris--128-GB--12-GB-RAM--6.2%22-AMOLED-120-Hz--Exynos-990--4000-mAh--Android   "                         },
  { "name": "Samsung S20+ 5G 128 GB 12 GB "                      ,  "normalPrice" : 1099   , "color" :  "lightblue"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_75479910/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-S20--5G--Azul--128-GB--12-GB-RAM--6.7%22-AMOLED-120Hz--Exynos-990--4500-mAh--Android   "                         },
  { "name": "Samsung S20 Ultra 5G 128 GB 12 GB "                 ,  "normalPrice" : 1349   , "color" :  "grey"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_72618948/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-S20-Ultra-5G--Gris--128-GB--12-GB-RAM--6.9%22-AMOLED-120Hz--Exynos-990--5000-mAh   "                         },
  { "name": "Samsung S20 Ultra 5G 128GB 12GB - REACONDICIONADO " ,  "normalPrice" : 1359   , "color" :  "grey"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_72618948/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-S20-Ultra-5G--Gris--128-GB--12-GB-RAM--6.9%22-AMOLED-120Hz--Exynos-990--5000-mAh   "                         },
  { "name": "Samsung S10 128 GB 8GB "                            ,  "normalPrice" :  599   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/pixelboxx-mss-80864341/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-S10--Negro--128-GB--8-GB-RAM--6.1%22-QHD---Exynos-9-9821--3400-mAh--Android   "                         },
  { "name": "Samsung S10 128 GB 8 GB "                           ,  "normalPrice" :  649   , "color" :  "white"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "   "                         },
  { "name": "Samsung S10+ 128 GB, 8 GB "                         ,  "normalPrice" :  699   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_76408915/fee_786_587_png   "                         },
  { "name": "Samsung S10 Lite 128 GB 8 GB  -REACONDICIONADO  "   ,  "normalPrice" :  527   , "color" :  "blue"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_71879754/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-S10-Lite--Azul--128-GB--8-GB-RAM--6.7%22-Full-HD---Octa-Core--4500-mAh--Android   "                         }, 
  { "name": "Samsung S10 Lite 128 GB 8 GB - REACONDICIONADO"     ,  "normalPrice" :  1     , "color" :  "blue"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_71879754/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-S10-Lite--Azul--128-GB--8-GB-RAM--6.7%22-Full-HD---Octa-Core--4500-mAh--Android   "                         }, 
  { "name": "Samsung S10 Lite 128 GB 8 GB "                      ,  "normalPrice" :  629   , "color" :  "blue"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_71879754/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-S10-Lite--Azul--128-GB--8-GB-RAM--6.7%22-Full-HD---Octa-Core--4500-mAh--Android   "                         }, 
  { "name": "Samsung S10 128 GB 8 GB - REACONDICIONADO "         ,  "normalPrice" :  599   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/pixelboxx-mss-80512791/fee_786_587_png/REACONDICIONADO-M%C3%B3vil---Samsung-Galaxy-S10--Negro--128-GB--8-GB-RAM--6.1%22-QHD---Exynos-9-9821--3400-mAh   "                         }, 
  { "name": "Samsung A71 128 GB 6 GB  "                          ,  "normalPrice" :  419   , "color" :  "silver"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_75369473/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-A71--Plata--128-GB--6-GB-RAM--6.7%22-Full-HD---SDM730--4500-mAh--Android   "                         }, 
  { "name": "Samsung A71 128 GB 6 GB"                            ,  "normalPrice" :  419   , "color" :  "black"        , "price": 0    ,    "difference": 0    , "percent": 0  , "brand": "mkr" ,    "linkUrl" :  ""     , "img": "https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_75369418/fee_786_587_png/M%C3%B3vil---Samsung-Galaxy-A71--Negro--128-GB--6-GB-RAM--6.7%22-Full-HD---SDM730--4500-mAh--Android   "                         }, 

 


];







// function to insert data into array
function dataFinder(phonesListIndex, jsonDataIndex , listName, fileFormat ) {

  var siteUrl = fileFormat.links[jsonDataIndex].link ;

  var JsonData = fileFormat.links[jsonDataIndex].price ;
  var JsonDataInt = JsonData.slice(0,-2);
  var ReplaceComma = parseFloat(JsonDataInt.replace(/,/g, ''));

  
  listName[phonesListIndex].difference =  listName[phonesListIndex].normalPrice - parseInt( ReplaceComma)  ;

  listName[phonesListIndex].price =  JsonData  ;
  // for percent
  
  
  var differenceInPrice = listName[phonesListIndex].normalPrice - parseInt( ReplaceComma) ;
  
  var percentValue = (parseInt(differenceInPrice) / parseInt(listName[phonesListIndex].normalPrice )) * 100   ;

  var roundedPercentValue = Math.round(percentValue) ;
  
  listName[phonesListIndex].percent =  roundedPercentValue ;

  
  listName[phonesListIndex].linkUrl = siteUrl ;




}





// write data to html

function phoneData(idIndex, sortedPhoneListIndex,listName) {
  document.getElementById('phone'+idIndex).innerHTML =  listName[sortedPhoneListIndex].name  ;
  document.getElementById('price'+idIndex).innerHTML =  "Price: " + listName[sortedPhoneListIndex].price + "<br><s class="+"beforePrice"+">  " + listName[sortedPhoneListIndex].normalPrice+"</s>" ;
  document.getElementById('difference'+idIndex).innerHTML =  listName[sortedPhoneListIndex].percent + "% Off" ;
  document.getElementById('img'+idIndex).src =  listName[sortedPhoneListIndex].img  ;
  document.getElementById('linkBtn'+idIndex).href =  listName[sortedPhoneListIndex].linkUrl  ;
  document.getElementById('color'+idIndex).style.backgroundColor =  listName[sortedPhoneListIndex].color  ;
  if (listName[sortedPhoneListIndex].brand == "mkr"){
      document.getElementById('brand'+idIndex).src =  "/img/mediamarkt.jpg"  ;
  } else if (listName[sortedPhoneListIndex].brand == "a") {
      document.getElementById('brand'+idIndex).src = '/img/amazon.png'
  }

}
   




///flipkart

fetch('/json/spain/mediamarkt_spain.json')
.then(res => res.json())
.then((json) => {
  

  var i , j ;
  for (i = 0 , j=41; i < 22,j<63; i++,j++) {
  

    dataFinder(i, j, mediamarkt , json)  ;
  }



  
  // soets phoneList data by difference value
  mediamarkt.sort(function(a, b){return a.difference - b.difference});





  // data of name , price and difference
 
     
  phoneData(1, 21, mediamarkt); 
  phoneData(3, 20, mediamarkt); 
  phoneData(5, 19, mediamarkt); 
  phoneData(7, 18, mediamarkt); 
  phoneData(9, 17, mediamarkt);
  phoneData(11, 16, mediamarkt);
  phoneData(13, 15, mediamarkt);
  phoneData(15, 14, mediamarkt);
  phoneData(17, 13, mediamarkt);
  phoneData(19, 12, mediamarkt);
  phoneData(8, 12, mediamarkt);
  phoneData(10, 11, mediamarkt);
  phoneData(12, 10, mediamarkt);
  phoneData(14, 9, mediamarkt);
  phoneData(16, 8, mediamarkt);
  phoneData(18, 7, mediamarkt);

  



  
  
  
  


})


// amazon






fetch('/json/spain/amazon_spain.json')
.then(res => res.json())
.then((json) => {


function dataFinderAmazon(phonesListIndex, jsonDataIndex , listName, fileFormat ) {

  var Url = fileFormat.links[jsonDataIndex].link ;

  var priceJson = fileFormat.links[jsonDataIndex].price ;

  var sliced_price = priceJson.slice(0,-5);

  var price = sliced_price.replace(".","");


  
  
  var differenceInPrice = listName[phonesListIndex].normalPrice - price ;
  
  var percentValue = (parseInt(differenceInPrice) / parseInt(listName[phonesListIndex].normalPrice )) * 100   ;

  var roundedPercentValue = Math.round(percentValue) ;

  listName[phonesListIndex].difference =  differenceInPrice  ;

  listName[phonesListIndex].price =  priceJson ;
  // for percent
  
  listName[phonesListIndex].percent =  roundedPercentValue ;

  
  listName[phonesListIndex].linkUrl = Url ;


  
  




  }




  // if there is error check if links is declared in json file 

   var i , j ;
  for (i = 0 , j=67; i < 10,j<77; i++,j++) {

  
    dataFinderAmazon(i,j, amazon, json); 
  }





  


  
  amazon.sort(function(a, b){return a.difference - b.difference});
  

 

 
  
    

  phoneData(2,  10,amazon);
  phoneData(4,  9,amazon);
  

  phoneData(6,  8,amazon);
  
  
  phoneData(20, 1, amazon);



  
 
  
  // for percent
  
  






})



 














































